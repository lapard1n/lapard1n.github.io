{"version":3,"sources":["_00main.js","_01webp.js","_02slider.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["\"use strict\"\r\n\r\n// TODO СКИДЫВАЮ КЛАСС ПРЕД-ЗАГРУЗКИ ДЛЯ СКИПА АНИМАЦИИ\r\nsetTimeout(function () {\r\n  document.querySelector('.preload').classList.remove('preload');\r\n}, 250)\r\n\r\n// TODO ОБНАРУЖЕНИЕ МОБИЛЬНХ УСТРОЙСТВ\r\nconst isMobile = {\r\n  Android: function () {\r\n    return navigator.userAgent.match(/Android/i);\r\n  },\r\n  BlackBerry: function () {\r\n    return navigator.userAgent.match(/BlackBerry/i);\r\n  },\r\n  iOS: function () {\r\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n  },\r\n  Opera: function () {\r\n    return navigator.userAgent.match(/Opera Mini/i);\r\n  },\r\n  Windows: function () {\r\n    return navigator.userAgent.match(/IEMobile/i);\r\n  },\r\n  any: function () {\r\n    return (\r\n      isMobile.Android() ||\r\n      isMobile.BlackBerry() ||\r\n      isMobile.iOS() ||\r\n      isMobile.Opera() ||\r\n      isMobile.Windows()\r\n    );\r\n  },\r\n}\r\n\r\n// TODO СКРИПТ ДЛЯ РАЗДЕЛЕНИЯ ПО ТИПУ УСТРОЙСТВ\r\nif (isMobile.any()) {\r\n  document.body.classList.add('_touch');\r\n\r\n  // ? ПОЛУЧАЕМ МАССИВ ОБЪЕКТОВ ДЛЯ МЕНЮ\r\n  let menuArrows = document.querySelectorAll('.menu__arrow');\r\n  if (menuArrows.length > 0) {\r\n    for (let index = 0; index < menuArrows.length; index++) {\r\n\r\n      const menuArrow = menuArrows[index];\r\n\r\n      // ? ОБРОБОТЧИК СОБЫТИЙ ДЛЯ ДИНАМИЧНОГО TOGGLE МЕНЮ\r\n      menuArrow.addEventListener(\"click\", function (e) {\r\n\r\n        // ? ЗАКРЫТИЕ ПРИ КЛИКЕ\r\n        if (menuArrow.parentElement.classList.contains('_active')) {\r\n          menuArrow.parentElement.classList.remove('_active');\r\n          return;\r\n        }\r\n\r\n        // ? ЗАКРЫТИЕ ВСЕХ АКТИВНЫХ ОТКРЫТИЕМ НОВОГО - ПЕРЕКЛЮЧЕНИЕ\r\n        for (let i = 0; i < menuArrows.length; i++) {\r\n          if (menuArrows[i].parentElement.classList.contains('_active')) {\r\n            menuArrows[i].parentElement.classList.remove('_active');\r\n          }\r\n        }\r\n\r\n        // ? ОТКРЫТИЕ НУЖНОГО TOGGLE МЕНЮ ПО КЛИКУ\r\n        menuArrow.parentElement.classList.toggle('_active');\r\n      }, false)\r\n    }\r\n  }\r\n\r\n} else {\r\n  document.body.classList.add('_pc');\r\n}\r\n\r\n// TODO ПРОКРУТКА ПРИ КЛИКЕ\r\nconst menuAnchors = document.querySelectorAll('a[data-goto]');\r\nfor (let menuAnchor of menuAnchors) {\r\n  menuAnchor.addEventListener('click', function (e) {\r\n    // ? ДЕЙСТВИЕ ПО УМОЛЧАНИЮ НЕ ДОЛЖНО ВЫПОЛНЯТЬСЯ\r\n    e.preventDefault();\r\n\r\n    // ? ССЫЛКА НА ОБЪЕКТЫ ПО DATA-GOTO\r\n    const dataSet = document.querySelector(menuAnchor.dataset.goto);\r\n\r\n    // ? ПРОВЕРКА ОТКРЫТОГО МЕНЮ\r\n    if (burgerMenu.classList.contains('_active')) {\r\n      document.body.classList.remove('_lock');\r\n      burgerMenu.classList.remove('_active');\r\n      menuDropout.classList.remove('_active');\r\n    }\r\n\r\n    // ? ПЛАВНЫЙ СКРОЛЛ К КОНКРЕТНОМУ ЭЛЕМЕНТУ\r\n    dataSet.scrollIntoView({\r\n      behavior: 'smooth',\r\n      block: 'start'\r\n    })\r\n  }, false)\r\n}\r\n\r\n// TODO КНОПКА ВОЗВРАЩЕНИЯ НАВЕРХ\r\nconst goToTopBtn = document.querySelector('.main__link-up');\r\nconst header = document.querySelector('.header');\r\nwindow.addEventListener('scroll', trackScroll, false);\r\n\r\nfunction trackScroll(e) {\r\n  e.preventDefault();\r\n  let scrolled = window.pageYOffset;\r\n  // ? ПОЛУЧАЮ ВЫСОТУ HEADER И ВЫЧИТАЮ 1 ДЛЯ ПОЯВЛЕНИЯ КНОПКИ ПРИ КЛИКЕ НА ANCHOR\r\n  let topIndent = 99;\r\n\r\n  if (scrolled > topIndent) {\r\n    goToTopBtn.classList.add('_show');\r\n  }\r\n  if (scrolled < topIndent) {\r\n    goToTopBtn.classList.remove('_show');\r\n  }\r\n}\r\n\r\n// TODO ПРОПИСВАЮ ПЛАВНУЮ ПРОКРУТКУ ВВЕРХ ПРИ НАЖАТИИ НА ПОЯВИВШУЮСЯ КНОПКУ\r\ngoToTopBtn.addEventListener('click', backToTop, false);\r\n\r\nfunction backToTop(e) {\r\n  e.preventDefault();\r\n\r\n  header.scrollIntoView({\r\n    behavior: 'smooth',\r\n    block: 'start'\r\n  })\r\n}\r\n\r\n// TODO ДОБАВЛЯЮ HR ЭЛЕМЕНТ В НАЧАЛО СПИСКА SUB-LIST НА ЭКРАНАХ ДО 768\r\nif (document.documentElement.clientWidth < 768) {\r\n\r\n  let hrElement = document.querySelectorAll('.menu__sub-list');\r\n  hrElement.forEach(i => {\r\n    let newUpHr = document.createElement('hr');\r\n    i.insertAdjacentElement('afterbegin', newUpHr);\r\n  })\r\n  hrElement.forEach(i => {\r\n    let newUpHr = document.createElement('hr');\r\n    i.insertAdjacentElement('beforeend', newUpHr);\r\n  })\r\n}\r\n\r\n// TODO СОЗДАЮ ТО САМОЕ ПРЕСЛОВУТОЕ БУРГЕР-МЕНЮ!\r\nconst burgerMenu = document.querySelector('.burger-menu');\r\nconst menuDropout = document.querySelector('.menu');\r\nburgerMenu.addEventListener('click', function (e) {\r\n  document.body.classList.toggle('_lock');\r\n  burgerMenu.classList.toggle('_active');\r\n  menuDropout.classList.toggle('_active');\r\n}, false);\r\n","// TODO СКРИПТ КОНВЕРТАЦИИ И СЖАТИЯ ИЗОБРАЖЕНИЙ\r\nfunction isWebp() {\r\n  function testWebP(callback) {\r\n    var webP = new Image();\r\n    webP.onload = webP.onerror = function () {\r\n      callback(webP.height == 2);\r\n    };\r\n    webP.src = \"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA\";\r\n  }\r\n  testWebP(function (support) {\r\n    if (support == true) {\r\n      document.querySelector('body').classList.add('webp');\r\n    } else {\r\n      document.querySelector('body').classList.add('no-webp');\r\n    }\r\n  });\r\n}\r\nisWebp();\r\n","// TODO УКАЗАНИЕ СЛАЙДА ПО УМОЛЧАНИЮ\r\n// TODO КНОПКИ ПРОКРУТКИ\r\n// TODO ЗАЦИКЛЕННОСТЬ ПЕРЕХОДА\r\n// TODO АВТО-ПРОКРУТКА СЛАЙДЕРА\r\n// TODO ПРОКРУТКА СВАЙПОМ\r\n\r\nconst wrapper = document.querySelector('.slider__wrapper');\r\nconst container = document.querySelector('.slider__container');\r\nconst track = document.querySelector('.slider__track');\r\nconst items = document.querySelectorAll('.slider__item');\r\nconst btnPrev = document.querySelector('.slider__control_prev');\r\nconst btnNext = document.querySelector('.slider__control_next');\r\n\r\nfunction slide(mainWrapper, prev, next) {\r\n  let posX1 = 0;\r\n  let posX2 = 0;\r\n  let posInitial;\r\n  let posFinal;\r\n  let threshold = 100;\r\n  let slides = track.querySelectorAll('.slider__item');\r\n  let slidesLength = slides.length;\r\n  let slideSize = track.querySelectorAll('.slider__item')[0].offsetWidth;\r\n  let firstSlide = slides[0];\r\n  let lastSlide = slides[slidesLength - 1];\r\n  let cloneFirst = firstSlide.cloneNode(true);\r\n  let cloneLast = lastSlide.cloneNode(true);\r\n  let index = 0;\r\n  let allowShift = true;\r\n\r\n  // ? КЛОНИРУЮ ПЕРВЫЕ И ПОСЛЕДНИЕ СЛАЙДЫ В ОЧЕРЕДЬ\r\n  track.appendChild(cloneFirst);\r\n  track.insertBefore(cloneLast, firstSlide);\r\n  mainWrapper.classList.add('loaded');\r\n\r\n  // ? СОБЫТИЕ МЫШЬЮ\r\n  track.onmousedown = dragStart;\r\n\r\n  // ? СОБЫТИЯ СВАЙПОМ\r\n  track.addEventListener('touchstart', dragStart);\r\n  track.addEventListener('touchend', dragEnd);\r\n  track.addEventListener('touchmove', dragAction);\r\n\r\n  // ? СОБЫТИЯ ПО КНОПКАМ\r\n  prev.addEventListener('click', function () { shiftSlide(-1) })\r\n  next.addEventListener('click', function () { shiftSlide(1) })\r\n\r\n  track.addEventListener('transitionend', checkIndex);\r\n\r\n  // ! ОПИСЫВАЮ СОБЫТИЯ\r\n  function dragStart(e) {\r\n    e = e || window.event;\r\n    e.preventDefault();\r\n    posInitial = track.offsetLeft;\r\n\r\n    if (e.type == 'touchstart') {\r\n      posX1 = e.touches[0].clientX;\r\n    } else {\r\n      posX1 = e.clientX;\r\n      document.onmouseup = dragEnd;\r\n      document.onmousemove = dragAction;\r\n    }\r\n  }\r\n  function dragAction(e) {\r\n    e = e || window.event;\r\n\r\n    if (e.type == 'touchmove') {\r\n      posX2 = posX1 - e.touches[0].clientX;\r\n      posX1 = e.touches[0].clientX;\r\n    } else {\r\n      posX2 = posX1 - e.clientX;\r\n      posX1 = e.clientX;\r\n    }\r\n\r\n    track.style.left = (track.offsetLeft - posX2) + \"px\";\r\n  }\r\n  function dragEnd(e) {\r\n    posFinal = track.offsetLeft;\r\n    if (posFinal - posInitial < -threshold) {\r\n      shiftSlide(1, 'drag');\r\n    } else if (posFinal - posInitial > threshold) {\r\n      shiftSlide(-1, 'drag');\r\n    } else {\r\n      track.style.left = (posInitial) + \"px\";\r\n    }\r\n\r\n    document.onmouseup = null;\r\n    document.onmousemove = null;\r\n  }\r\n\r\n  // ? ГЛАВНЫЕ ФУНКЦИИ СМЕЩЕНИЯ\r\n  function shiftSlide(dir, action) {\r\n    track.classList.add('shifting');\r\n\r\n    if (allowShift) {\r\n      if (!action) {\r\n        posInitial = track.offsetLeft;\r\n      }\r\n      if (dir == 1) {\r\n        track.style.left = (posInitial - slideSize) + \"px\";\r\n        index++;\r\n      } else if (dir == -1) {\r\n        track.style.left = (posInitial + slideSize) + \"px\";\r\n        index--;\r\n      }\r\n    };\r\n\r\n    allowShift = false;\r\n  }\r\n\r\n  function checkIndex() {\r\n    track.classList.remove('shifting');\r\n\r\n    if (index == -1) {\r\n      track.style.left = -(slidesLength * slideSize) + \"px\";\r\n      index = slidesLength - 1;\r\n    }\r\n\r\n    if (index == slidesLength) {\r\n      track.style.left = -(1 * slideSize) + \"px\";\r\n      index = 0;\r\n    }\r\n\r\n    allowShift = true;\r\n  }\r\n}\r\n\r\nslide(wrapper, btnPrev, btnNext);\r\n\r\n// TODO СОЗДАЮ ИНДИКАТОРЫ ПРОКРУТКИ В ЗАВИСИМОСТИ ОТ КОЛИЧЕСТВА СЛАЙДОВ\r\nconst indicators = document.querySelector('.slider__indicators');\r\n\r\nfor (let i = 0; i != items.length; i++) {\r\n  // ? СОЗДАЮ ПОЛОСКУ ИНДИКАТОРА\r\n  let indicatorLine = document.createElement('span');\r\n  indicatorLine.classList.add('slider__indicator-line');\r\n  // ? СОЗДАЮ ОБОЛОЧКУ ИНДИКТОРОВ\r\n  let indicatorCase = document.createElement('button');\r\n  indicatorCase.classList.add('slider__indicator-case');\r\n  indicatorCase.setAttribute('href', '#');\r\n  indicatorCase.appendChild(indicatorLine);\r\n  // ? НАКОНЕЦ ДОБАВЛЯЮ ПАРТИЮ ГОТОВЫХ РЕБЯТ В РОДИТЕЛЯ\r\n  indicators.appendChild(indicatorCase);\r\n}\r\n"]}
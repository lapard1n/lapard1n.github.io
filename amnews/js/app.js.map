{"version":3,"sources":["_00devices.js","_01main.js","_02slider.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["\"use strict\"\r\n\r\n// TODO ПОДКЛЮЧАЮ БИБЛИОТЕКУ СО СТАТУС-БАРОМ ЗАГРУЗКИ\r\n$(document).ready(function () {\r\n  NProgress.start();\r\n});\r\n$(window).on('load', function () {\r\n  NProgress.done(true);\r\n});\r\n\r\n// TODO СКИДЫВАЮ КЛАСС ПРЕД-ЗАГРУЗКИ ДЛЯ СКИПА АНИМАЦИИ\r\nsetTimeout(function () {\r\n  document.querySelector('.preload').classList.remove('preload');\r\n}, 250)\r\n\r\n// TODO SLIDER КНОПКА\r\nconst sliderBtn = document.querySelector('.slider__link-down');\r\nwindow.onload = () => {\r\n  window.setTimeout(() => {\r\n    sliderBtn.classList.add('show');\r\n  }, 300)\r\n}\r\n\r\n// TODO ОБНАРУЖЕНИЕ МОБИЛЬНХ УСТРОЙСТВ\r\nconst isMobile = {\r\n  Android: function () {\r\n    return navigator.userAgent.match(/Android/i);\r\n  },\r\n  BlackBerry: function () {\r\n    return navigator.userAgent.match(/BlackBerry/i);\r\n  },\r\n  iOS: function () {\r\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n  },\r\n  Opera: function () {\r\n    return navigator.userAgent.match(/Opera Mini/i);\r\n  },\r\n  Windows: function () {\r\n    return navigator.userAgent.match(/IEMobile/i);\r\n  },\r\n  any: function () {\r\n    return (\r\n      isMobile.Android() ||\r\n      isMobile.BlackBerry() ||\r\n      isMobile.iOS() ||\r\n      isMobile.Opera() ||\r\n      isMobile.Windows()\r\n    );\r\n  },\r\n}\r\n\r\n// TODO СКРИПТ ДЛЯ РАЗДЕЛЕНИЯ ПО ТИПУ УСТРОЙСТВ\r\nif (isMobile.any()) {\r\n  document.body.classList.add('_touch');\r\n\r\n  // ? ПОЛУЧАЕМ МАССИВ ОБЪЕКТОВ ДЛЯ МЕНЮ\r\n  const menuArrows = document.querySelectorAll('.menu__arrow');\r\n  if (menuArrows.length > 0) {\r\n    for (let index = 0; index < menuArrows.length; index++) {\r\n\r\n      const menuArrow = menuArrows[index];\r\n\r\n      // ? ОБРОБОТЧИК СОБЫТИЙ ДЛЯ ДИНАМИЧНОГО TOGGLE МЕНЮ\r\n      menuArrow.addEventListener(\"click\", function (e) {\r\n\r\n        // ? ЗАКРЫТИЕ ПРИ КЛИКЕ\r\n        if (menuArrow.parentElement.classList.contains('_active')) {\r\n          menuArrow.parentElement.classList.remove('_active');\r\n          return;\r\n        }\r\n\r\n        // ? ЗАКРЫТИЕ ВСЕХ АКТИВНЫХ ОТКРЫТИЕМ НОВОГО - ПЕРЕКЛЮЧЕНИЕ\r\n        for (let i = 0; i < menuArrows.length; i++) {\r\n          if (menuArrows[i].parentElement.classList.contains('_active')) {\r\n            menuArrows[i].parentElement.classList.remove('_active');\r\n          }\r\n        }\r\n\r\n        // ? ОТКРЫТИЕ НУЖНОГО TOGGLE МЕНЮ ПО КЛИКУ\r\n        menuArrow.parentElement.classList.toggle('_active');\r\n      }, false)\r\n    }\r\n  }\r\n\r\n} else {\r\n  document.body.classList.add('_pc');\r\n}\r\n","// TODO ПРОКРУТКА ПРИ КЛИКЕ\r\nconst menuAnchors = document.querySelectorAll('a[data-goto]');\r\nfor (let menuAnchor of menuAnchors) {\r\n  menuAnchor.addEventListener('click', function (e) {\r\n    // ? ДЕЙСТВИЕ ПО УМОЛЧАНИЮ НЕ ДОЛЖНО ВЫПОЛНЯТЬСЯ\r\n    e.preventDefault();\r\n\r\n    // ? ССЫЛКА НА ОБЪЕКТЫ ПО DATA-GOTO\r\n    const dataSet = document.querySelector(menuAnchor.dataset.goto);\r\n\r\n    // ? ПРОВЕРКА ОТКРЫТОГО МЕНЮ\r\n    if (burgerMenu.classList.contains('_active')) {\r\n      document.body.classList.remove('_lock');\r\n      burgerMenu.classList.remove('_active');\r\n      menuDropout.classList.remove('_active');\r\n    }\r\n\r\n    // ? ПЛАВНЫЙ СКРОЛЛ К КОНКРЕТНОМУ ЭЛЕМЕНТУ\r\n    dataSet.scrollIntoView({\r\n      behavior: 'smooth',\r\n      block: 'start'\r\n    })\r\n  }, false)\r\n}\r\n\r\n// TODO КНОПКА ВОЗВРАЩЕНИЯ НАВЕРХ\r\nconst goToTopBtn = document.querySelector('.main__link-up');\r\nconst header = document.querySelector('.header');\r\nconst options = { threshold: 1.0 }\r\n\r\nconst observeCallback = function (entries, observer) {\r\n  entries.forEach((entry) => {\r\n    // ? СВОЙСТВА ОБЪЕКТА IntersectionObserver\r\n    const {\r\n      // ? ДОСТУП К ОТСЛЕЖИВАЕМОМУ ЭЛЕМЕНТУ\r\n      target,\r\n      // ? true ЕСЛИ ОТСЛЕЖИВАЕМЫЙ ЭЛЕМЕНТ ПЕРЕСЕКАЕТ viewport ХОТЯ БЫ НА 1 px\r\n      isIntersecting\r\n    } = entry;\r\n\r\n    if (isIntersecting) {\r\n      goToTopBtn.classList.remove('show');\r\n    } else {\r\n      goToTopBtn.classList.add('show');\r\n    }\r\n  });\r\n}\r\n\r\nconst observer = new IntersectionObserver(observeCallback, options);\r\nobserver.observe(header);\r\n\r\n// TODO ПРОПИСВАЮ ПЛАВНУЮ ПРОКРУТКУ ВВЕРХ ПРИ НАЖАТИИ НА ПОЯВИВШУЮСЯ КНОПКУ\r\ngoToTopBtn.addEventListener('click', backToTop, false);\r\n\r\nfunction backToTop(e) {\r\n  e.preventDefault();\r\n\r\n  header.scrollIntoView({\r\n    behavior: 'smooth',\r\n    block: 'start'\r\n  })\r\n}\r\n\r\n// TODO ДОБАВЛЯЮ HR ЭЛЕМЕНТ В НАЧАЛО СПИСКА SUB-LIST НА ЭКРАНАХ ДО 768\r\nif (document.documentElement.clientWidth < 768) {\r\n\r\n  const hrElement = document.querySelectorAll('.menu__sub-list');\r\n  hrElement.forEach(i => {\r\n    const newUpHr = document.createElement('hr');\r\n    i.insertAdjacentElement('afterbegin', newUpHr);\r\n  })\r\n  hrElement.forEach(i => {\r\n    const newUpHr = document.createElement('hr');\r\n    i.insertAdjacentElement('beforeend', newUpHr);\r\n  })\r\n}\r\n\r\n// TODO СОЗДАЮ ТО САМОЕ ПРЕСЛОВУТОЕ БУРГЕР-МЕНЮ!\r\nconst burgerMenu = document.querySelector('.burger-menu');\r\nconst menuDropout = document.querySelector('.menu');\r\nburgerMenu.addEventListener('click', function (e) {\r\n  document.body.classList.toggle('_lock');\r\n  burgerMenu.classList.toggle('_active');\r\n  menuDropout.classList.toggle('_active');\r\n}, false);\r\n\r\n// TODO СТИЛИЗУЮ FOOTER С ПОМОЩЬЮ СКРИПТОВ\r\n// ? УСТАНАВЛИВАЮ ВЫСОТУ ЭЛЕМЕНТА ПО САМОМУ БОЛЬШОМУ\r\nconst footerLine = document.querySelector(\".footer__line\");\r\nconst footerInfo = document.querySelector(\".footer__info\");\r\nconst footerHeight = document.querySelector(\".footer__input-case\").offsetHeight;\r\n\r\nfooterLine.style.height = (footerHeight - 70) + \"px\";\r\nfooterInfo.style.height = footerHeight + \"px\";\r\n\r\n// ? АНИМИРУЮТ LABEL ПРИ ОЧИСТКЕ ПОЛЯ INPUT\r\nconst footerInput = document.querySelectorAll(\".footer__input\");\r\nconst footerLabel = document.querySelectorAll('.footer__label');\r\nconst footerReset = document.querySelector('buttun.footer__submit');\r\n\r\nfooterInput.forEach(input => {\r\n  input.addEventListener('input', function (e) {\r\n    input.nextSibling.nextSibling.classList.add(\"input-active\");\r\n    if (input.value == '') {\r\n      input.nextSibling.nextSibling.classList.remove(\"input-active\");\r\n    }\r\n  }, false);\r\n  footerReset.addEventListener('click', function (e) {\r\n    input.value = '';\r\n    input.nextSibling.nextSibling.classList.remove(\"input-active\");\r\n  }, false);\r\n})\r\n\r\n\r\n\r\n","const wrapper = document.querySelector('.slider__wrapper');\r\nconst track = document.querySelector('.slider__track');\r\nconst items = document.querySelectorAll('.slider__item');\r\nconst btnPrev = document.querySelector('.slider__control_prev');\r\nconst btnNext = document.querySelector('.slider__control_next');\r\nconst indicators = document.querySelector('.slider__indicators');\r\n\r\n// TODO ОСНОВНАЯ ФУНКЦИЯ РАБОТЫ СЛАЙДЕРА\r\nfunction slide() {\r\n  let posX1 = 0;\r\n  let posX2 = 0;\r\n  let posInitial;\r\n  let posFinal;\r\n  let threshold = 100;\r\n  let slidesLength = items.length;\r\n  let slideSize = items[0].offsetWidth;\r\n  let firstSlide = items[0];\r\n  let lastSlide = items[slidesLength - 1];\r\n  let cloneFirst = firstSlide.cloneNode(true);\r\n  let cloneLast = lastSlide.cloneNode(true);\r\n  let index = 0;\r\n  let allowShift = true;\r\n\r\n  // ? КЛОНИРУЮ ПЕРВЫЕ И ПОСЛЕДНИЕ СЛАЙДЫ В ОЧЕРЕДЬ\r\n  track.insertBefore(cloneLast, firstSlide); // ДО\r\n  track.appendChild(cloneFirst); // ПОСЛЕ\r\n\r\n  // ? КОГДА СЛАЙДЫ КЛАНИРОВАНЫ ПРИМЕНЯЕМ СТИЛИ\r\n  wrapper.classList.add('loaded');\r\n\r\n  // ? СОБЫТИЕ ДЛЯ МЫШИ\r\n  track.onmousedown = dragStart;\r\n\r\n  // TODO ИНИЦИАЛИЗАЦИЯ СОБЫТИЙ\r\n  // ? СОБЫТИЯ ДЛЯ СВАЙПОВ\r\n  track.addEventListener('touchstart', dragStart);\r\n  track.addEventListener('touchmove', dragAction);\r\n  track.addEventListener('touchend', dragEnd);\r\n\r\n  // ? СОБЫТИЯ ПО КНОПКАМ\r\n  btnPrev.addEventListener('click', function () {\r\n    shiftSlide(\"prev\", \"click\");\r\n  })\r\n  btnNext.addEventListener('click', function () {\r\n    shiftSlide(\"next\", \"click\");\r\n  })\r\n\r\n  track.addEventListener('transitionend', checkIndex);\r\n\r\n  // TODO ПРОКРУТКА СВАЙПОМ\r\n  function dragStart(e) {\r\n    e = e || window.event;\r\n    e.preventDefault();\r\n    posInitial = track.offsetLeft;\r\n    track.classList.add('active');\r\n\r\n    if (e.type == 'touchstart') {\r\n      posX1 = e.touches[0].clientX;\r\n    } else {\r\n      posX1 = e.clientX;\r\n      document.onmousemove = dragAction;\r\n      document.onmouseup = dragEnd;\r\n    }\r\n  }\r\n  function dragAction(e) {\r\n    e = e || window.event;\r\n\r\n    if (e.type == 'touchmove') {\r\n      posX2 = posX1 - e.touches[0].clientX;\r\n      posX1 = e.touches[0].clientX;\r\n    } else {\r\n      posX2 = posX1 - e.clientX;\r\n      posX1 = e.clientX;\r\n    }\r\n\r\n    track.style.left = (track.offsetLeft - posX2) + \"px\";\r\n  }\r\n  function dragEnd(e) {\r\n    posFinal = track.offsetLeft;\r\n\r\n    if (posFinal - posInitial < -threshold) {\r\n      shiftSlide(\"next\", \"swipe\");\r\n    } else if (posFinal - posInitial > threshold) {\r\n      shiftSlide(\"prev\", \"swipe\");\r\n    } else {\r\n      track.style.left = (posInitial) + \"px\";\r\n    }\r\n\r\n    document.onmousemove = null;\r\n    document.onmouseup = null;\r\n    track.classList.replace('active', 'unactive');\r\n  }\r\n\r\n  // TODO КНОПКИ ПРОКРУТКИ\r\n  function shiftSlide(dir, action) {\r\n    track.classList.add('shifting');\r\n\r\n    if (allowShift) {\r\n      // ? УСЛОВИЕ ОБНУЛЕНИЯ НАЧАЛЬНОЙ ПОЗИЦИИ ТОЛЬКО ДЛЯ КНОПОК*\r\n      if (action == \"click\") {\r\n        posInitial = track.offsetLeft;\r\n      }\r\n      // ? УСЛОВИЕ САМОЙ ПРОКРУТКИ\r\n      if (dir == \"next\") {\r\n        track.style.left = (posInitial - slideSize) + \"px\";\r\n        index++;\r\n      } else if (dir == \"prev\") {\r\n        track.style.left = (posInitial + slideSize) + \"px\";\r\n        index--;\r\n      }\r\n    };\r\n\r\n    allowShift = false;\r\n  }\r\n\r\n  // TODO ЗАЦИКЛЕННОСТЬ ПЕРЕХОДА\r\n  function checkIndex() {\r\n    track.classList.remove('shifting');\r\n\r\n    if (index == -1) {\r\n      track.style.left = -(slidesLength * slideSize) + \"px\";\r\n      index = slidesLength - 1;\r\n    }\r\n\r\n    if (index == slidesLength) {\r\n      track.style.left = -(1 * slideSize) + \"px\";\r\n      index = 0;\r\n    }\r\n\r\n    allowShift = true;\r\n  }\r\n\r\n  // TODO ПЕРЕКЛЮЧЕНИЕ СЛАЙДОВ ПО ИНДИКАТОРАМ\r\n  // ? ИНДИКАТОРЫ ПРОКРУТКИ В ЗАВИСИМОСТИ ОТ КОЛИЧЕСТВА СЛАЙДОВ\r\n  for (let i = 0; i != items.length; i++) {\r\n    // ? СОЗДАЮ ПОЛОСКУ ИНДИКАТОРА\r\n    const indicatorLine = document.createElement('span');\r\n    indicatorLine.classList.add('slider__indicator-line');\r\n    // ? СОЗДАЮ ОБОЛОЧКУ ИНДИКТОРОВ\r\n    const indicatorCase = document.createElement('button');\r\n    indicatorCase.classList.add('slider__indicator-case');\r\n    indicatorCase.setAttribute('data-index', i);\r\n    if (i == 0) {\r\n      indicatorCase.classList.add('active');\r\n    }\r\n    indicatorCase.setAttribute('href', '#');\r\n    indicatorCase.appendChild(indicatorLine);\r\n    // ? НАКОНЕЦ ДОБАВЛЯЮ ПАРТИЮ ГОТОВЫХ РЕБЯТ В РОДИТЕЛЯ\r\n    indicators.appendChild(indicatorCase);\r\n  }\r\n\r\n  // const indicator = document.querySelector('.slider__indicator-case.active');\r\n  // indicator.classList.remove('active');\r\n\r\n  // TODO АВТО-ПРОКРУТКА СЛАЙДЕРА\r\n  // ? ОПИСЫВАЮ ВРЕМЯ И РАБОТУ ИНТЕРВАЛА\r\n  const timeShift = 7500;\r\n  function autoShift() {\r\n    track.classList.add('shifting');\r\n    posInitial = track.offsetLeft;\r\n    track.style.left = (posInitial - slideSize) + \"px\";\r\n    index++;\r\n    if (index == (slidesLength + 1)) {\r\n      track.classList.remove('shifting');\r\n      track.style.left = -(1 * slideSize) + \"px\";\r\n      index = 0;\r\n    }\r\n\r\n    console.log('go');\r\n  }\r\n  let timer = setInterval(autoShift, timeShift);\r\n\r\n  // ? ОТСЛЕЖИВАЮ РАБОТУ ИНТЕРВАЛА ДЛЯ СВАЙПОВ\r\n  const config = { \"attributes\": true };\r\n  const observeShift = new MutationObserver(mutationEvent);\r\n  function mutationEvent() {\r\n    if (track.classList.contains('active')) {\r\n      console.log('ОСТАНОВКА!');\r\n      clearInterval(timer);\r\n    } else if (track.classList.contains('unactive')) {\r\n      console.log('ПРОДОЛЖЕНИЕ!');\r\n      timer = setInterval(autoShift, timeShift);\r\n      track.classList.remove('unactive');\r\n    }\r\n  };\r\n  observeShift.observe(track, config);\r\n\r\n  // ? ОТСЛЕЖИВАЮ РАБОТУ ИНТЕРВАЛА ПРИ КЛИКАХ ПО КНОПКАМ\r\n  btnPrev.addEventListener('click', function () {\r\n    console.log('ОБНОВИЛ!');\r\n    clearInterval(timer);\r\n    timer = setInterval(autoShift, timeShift);\r\n  });\r\n  btnNext.addEventListener('click', function () {\r\n    console.log('ОБНОВИЛ!');\r\n    clearInterval(timer);\r\n    timer = setInterval(autoShift, timeShift);\r\n  });\r\n\r\n  // ? ОТСЛЕЖИВАЮ РАБОТУ ИНТЕРВАЛА ПРИ УХОДЕ СО СТРАНИЦЫ\r\n  document.addEventListener(\"visibilitychange\", function () {\r\n    if (document.visibilityState === 'hidden') {\r\n      console.log('Вкладка не активна');\r\n      clearInterval(timer);\r\n    } else {\r\n      console.log('Вкладка активна');\r\n      timer = setInterval(autoShift, timeShift);\r\n    }\r\n  });\r\n\r\n  // TODO ОПТИМИЗАЦИЯ СЛУШАТЕЛЕЙ СОБЫТИЙ\r\n}\r\n\r\nslide()\r\n"]}